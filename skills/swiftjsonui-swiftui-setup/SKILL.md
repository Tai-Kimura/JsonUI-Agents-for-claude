---
name: swiftjsonui-swiftui-setup
description: Setup and development workflow for SwiftJsonUI with SwiftUI mode.
---

# SwiftJsonUI Setup (SwiftUI Mode)

## NEVER CREATE FILES MANUALLY

**DO NOT create any files yourself.** All files are generated by commands:

- JSON files → `g view`, `g partial`, `g collection` commands
- Swift files → `setup`, `build` commands
- Config files → `init` command

---

## Checklist

**You are NOT done until ALL items are checked:**

- [ ] Step 1: Project root confirmed (.xcodeproj exists)
- [ ] Step 2: sjui_tools installed
- [ ] Step 3: sjui.config.json created
- [ ] Step 4: Port configured (8081)
- [ ] Step 5: setup command executed
- [ ] Step 6: Splash view generated
- [ ] Step 7: App.swift modified with ViewSwitcher
- [ ] Step 8: sjui build executed
- [ ] Step 9: Final verification passed

---

## Step 1: Go to project root
```bash
cd <project_directory>  # Provided by setup agent
ls *.xcodeproj          # VERIFY: Must show .xcodeproj file
```

## Step 2: Copy sjui_tools to project
```bash
cp -r ~/.jsonui-cli/sjui_tools ./
ls sjui_tools/bin/sjui  # VERIFY: File must exist
```

## Step 3: Initialize
```bash
./sjui_tools/bin/sjui init --mode swiftui
ls sjui.config.json  # VERIFY: File must exist
```

## Step 4: Verify and Edit sjui.config.json

**Required checks:**
1. `source_path` - Must be the actual source directory relative to project root
2. `layouts_directory` - Usually `Layouts`
3. `view_directory` - Usually `View`
4. `viewmodel_directory` - Usually `ViewModel`
5. `data_directory` - Usually `Data`
6. `resource_manager_directory` - Usually `Generated` or `Core`
7. `hotloader.port` - Set to `8081`

## Step 5: Run setup
```bash
./sjui_tools/bin/sjui setup
```

## Step 6: Generate Splash view
```bash
./sjui_tools/bin/sjui g view Splash --root
```

## Step 7: Edit App.swift

Add to App.swift:
1. `import SwiftJsonUI`
2. `DeveloperScreen` enum for navigation screens
3. `@State private var currentScreen` state
4. `init()` with hot reload setup
5. Wrap content in `DeveloperMenuContainer`

```swift
import SwiftUI
import SwiftJsonUI

enum Screen: String, CaseIterable, DeveloperScreen {
    case splash = "Splash"
    var name: String { rawValue }
}

@main
struct YourAppApp: App {
    @State private var currentScreen: Screen = .splash
    private let developerMenuEnabled = true

    init() {
        SwiftJsonUIConfiguration.shared.colorProvider = { key in
            guard let key = key as? String else { return nil }
            return ColorManager.swiftui.color(for: key)
        }

        #if DEBUG
        JSONLayoutLoader.copyResourcesToCache()
        ViewSwitcher.setDynamicMode(false)
        HotLoader.instance.isHotLoadEnabled = true
        #endif
    }

    var body: some Scene {
        WindowGroup {
            DeveloperMenuContainer(
                currentScreen: $currentScreen,
                screens: Screen.allCases,
                enabled: developerMenuEnabled
            ) { screen in
                switch screen {
                case .splash:
                    SplashView()
                }
            }
        }
    }
}
```

## Step 8: Build to generate resource managers
```bash
./sjui_tools/bin/sjui build
```

## Step 9: Final Verification

Verify these files exist:
1. `sjui_tools/bin/sjui`
2. `sjui.config.json`
3. `{source_path}/View/Splash/`
4. `{source_path}/{resource_manager_directory}/StringManager.swift`
5. `{source_path}/{resource_manager_directory}/ColorManager.swift`
6. `{source_path}/{layouts_directory}/Resources/strings.json`
7. `{source_path}/{layouts_directory}/Resources/colors.json`

## Hotloader Command
```bash
./sjui_tools/bin/sjui hotload listen
```

